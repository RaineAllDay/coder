Start a Coder server

Usage:
  coder server [flags]

Commands:
  create-admin-user      Create a new admin user with the given username, email
                         and password and adds it to every organization.
  postgres-builtin-serve Run the built-in PostgreSQL deployment.
  postgres-builtin-url   Output the connection URL for the built-in PostgreSQL
                         deployment.

Flags:
      --cache-dir string              The directory to cache temporary files. If unspecified
                                      and $CACHE_DIRECTORY is set, it will be used for
                                      compatibility with systemd
                                      Consumes $CODER_CACHE_DIRECTORY (default
                                      "[cache dir]")
      --disable-path-apps             Disable workspace apps that are not served from
                                      subdomains. Path-based apps can make requests to the
                                      Coder API and pose a security risk when the workspace
                                      serves malicious JavaScript. This is recommended for
                                      security purposes if a --wildcard-access-url is
                                      configured
                                      Consumes $CODER_DISABLE_PATH_APPS
      --swagger-enable                Expose the swagger endpoint via /swagger
                                      Consumes $CODER_SWAGGER_ENABLE
      --experiments stringArray       Enable one or more experiments. These are not ready for
                                      production. Separate multiple experiments with commas,
                                      or enter '*' to opt-in to all available experiments
                                      Consumes $CODER_EXPERIMENTS
      --postgres-url string           URL of a PostgreSQL database. If empty, PostgreSQL
                                      binaries will be downloaded from Maven
                                      (https://repo1.maven.org/maven2) and store all data in
                                      the config root. Access the built-in database with
                                      "coder server postgres-builtin-url"
                                      Consumes $CODER_PG_CONNECTION_URL
      --ssh-keygen-algorithm string   The algorithm to use for generating ssh keys. Accepted
                                      values are "ed25519", "ecdsa", or "rsa4096"
                                      Consumes $CODER_SSH_KEYGEN_ALGORITHM (default "ed25519")
      --update-check                  Periodically check for new releases of Coder and inform
                                      the owner. The check is performed once per day
                                      Consumes $CODER_UPDATE_CHECK (default false)
Client Flags: 
These options change the behavior of how clients interact with the Coder.
Clients include the coder cli, vs code extension, and the web UI.

      --ssh-config-options stringArray   These SSH config options will override the default
                                         SSH config options. Provide options in "key=value" or
                                         "key value" format separated by commas.Using this
                                         incorrectly can break SSH to your deployment, use
                                         cautiously
                                         Consumes $CODER_SSH_CONFIG_OPTIONS
      --ssh-hostname-prefix string       The SSH deployment prefix is used in the Host of the
                                         ssh config
                                         Consumes $CODER_SSH_HOSTNAME_PREFIX (default
                                         "coder.")
Introspection / Logging Flags: 
      --log-human string         Output human-readable logs to a given file
                                 Consumes $CODER_LOGGING_HUMAN (default "/dev/stderr")
      --log-json string          Output JSON logs to a given file
                                 Consumes $CODER_LOGGING_JSON
      --log-stackdriver string   Output Stackdriver compatible logs to a given file
                                 Consumes $CODER_LOGGING_STACKDRIVER
  -v, --verbose                  Output debug-level logs
                                 Consumes $CODER_VERBOSE
Introspection / Prometheus Flags: 
      --prometheus-address host:port   The bind address to serve prometheus metrics
                                       Consumes $CODER_PROMETHEUS_ADDRESS (default
                                       127.0.0.1:2112)
      --prometheus-enable              Serve prometheus metrics on the address defined by
                                       prometheus address
                                       Consumes $CODER_PROMETHEUS_ENABLE
Introspection / Tracing Flags: 
      --trace-logs                       Enables capturing of logs as events in traces. This
                                         is useful for debugging, but may result in a very
                                         large amount of events being sent to the tracing
                                         backend which may incur significant costs. If the
                                         verbose flag was supplied, debug-level logs will be
                                         included
                                         Consumes $CODER_TRACE_LOGS
      --trace                            Whether application tracing data is collected. It
                                         exports to a backend configured by environment
                                         variables. See:
                                         https://github.com/open-telemetry/opentelemetry-specification/blob/main/specification/protocol/exporter.md
                                         Consumes $CODER_TRACE_ENABLE
      --trace-honeycomb-api-key string   Enables trace exporting to Honeycomb.io using the
                                         provided API Key
                                         Consumes $CODER_TRACE_HONEYCOMB_API_KEY
Introspection / pprof Flags: 
      --pprof-address host:port   The bind address to serve pprof
                                  Consumes $CODER_PPROF_ADDRESS (default 127.0.0.1:6060)
      --pprof-enable              Serve pprof metrics on the address defined by pprof address
                                  Consumes $CODER_PPROF_ENABLE
Networking Flags: 
      --access-url url                      The URL that users will use to access the Coder
                                            deployment
                                            Consumes $CODER_ACCESS_URL
      --proxy-trusted-headers stringArray   Headers to trust for forwarding IP addresses. e.g.
                                            Cf-Connecting-Ip, True-Client-Ip, X-Forwarded-For
                                            Consumes $CODER_PROXY_TRUSTED_HEADERS
      --proxy-trusted-origins stringArray   Origin addresses to respect
                                            "proxy-trusted-headers". e.g. 192.168.1.0/24
                                            Consumes $CODER_PROXY_TRUSTED_ORIGINS
      --redirect-to-access-url              Specifies whether to redirect requests that do not
                                            match the access URL host
                                            Consumes $CODER_REDIRECT_TO_ACCESS_URL
      --secure-auth-cookie                  Controls if the 'Secure' property is set on
                                            browser session cookies
                                            Consumes $CODER_SECURE_AUTH_COOKIE
      --wildcard-access-url url             Specifies the wildcard hostname to use for
                                            workspace applications in the form "*.example.com"
                                            Consumes $CODER_WILDCARD_ACCESS_URL
Networking / DERP Flags: 
Most Coder deployments never have to think about DERP because all connections
between workspaces and users are peer-to-peer. However, when Coder cannot
establish a peer to peer connection, Coder uses a distributed relay network
backed by Tailscale and WireGuard.

      --derp-config-path string                  Path to read a DERP mapping from. See:
                                                 https://tailscale.com/kb/1118/custom-derp-servers/
                                                 Consumes $CODER_DERP_CONFIG_PATH
      --derp-config-url string                   URL to fetch a DERP mapping on startup. See:
                                                 https://tailscale.com/kb/1118/custom-derp-servers/
                                                 Consumes $CODER_DERP_CONFIG_URL
      --derp-server-enable                       Whether to enable or disable the embedded
                                                 DERP relay server
                                                 Consumes $CODER_DERP_SERVER_ENABLE (default
                                                 true)
      --derp-server-region-code string           Region code to use for the embedded DERP
                                                 server
                                                 Consumes $CODER_DERP_SERVER_REGION_CODE
                                                 (default "coder")
      --derp-server-region-id int                Region ID to use for the embedded DERP server
                                                 Consumes $CODER_DERP_SERVER_REGION_ID
                                                 (default 999)
      --derp-server-region-name string           Region name that for the embedded DERP server
                                                 Consumes $CODER_DERP_SERVER_REGION_NAME
                                                 (default "Coder Embedded Relay")
      --derp-server-stun-addresses stringArray   Addresses for STUN servers to establish P2P
                                                 connections. Set empty to disable P2P
                                                 connections
                                                 Consumes $CODER_DERP_SERVER_STUN_ADDRESSES
                                                 (default [stun.l.google.com:19302])
Networking / HTTP Flags: 
      --disable-password-auth            Disable password authentication. This is recommended
                                         for security purposes in production deployments that
                                         rely on an identity provider. Any user with the owner
                                         role will be able to sign in with their password
                                         regardless of this setting to avoid potential lock
                                         out. If you are locked out of your account, you can
                                         use the `coder server create-admin` command to create
                                         a new admin user directly in the database
                                         Consumes $CODER_DISABLE_PASSWORD_AUTH
      --disable-session-expiry-refresh   Disable automatic session expiry bumping due to
                                         activity. This forces all sessions to become invalid
                                         after the session expiry duration has been reached
                                         Consumes $CODER_DISABLE_SESSION_EXPIRY_REFRESH
      --http-address string              HTTP bind address of the server. Unset to disable the
                                         HTTP endpoint
                                         Consumes $CODER_HTTP_ADDRESS (default
                                         "127.0.0.1:3000")
      --max-token-lifetime duration      The maximum lifetime duration users can specify when
                                         creating an API token
                                         Consumes $CODER_MAX_TOKEN_LIFETIME (default
                                         2562047h47m16.854775807s)
      --session-duration duration        The token expiry duration for browser sessions.
                                         Sessions may last longer if they are actively making
                                         requests, but this functionality can be disabled via
                                         --disable-session-expiry-refresh
                                         Consumes $CODER_SESSION_DURATION (default 24h0m0s)
Networking / TLS Flags: 
Configure TLS / HTTPS for your Coder deployment. If you're running Coder behind
a TLS-terminating reverse proxy or are accessing Coder over a secure link, you
can safely ignore these settings.

      --strict-transport-security int                   Controls if the
                                                        'Strict-Transport-Security' header is
                                                        set on all static file responses. This
                                                        header should only be set if the
                                                        server is accessed via HTTPS. This
                                                        value is the MaxAge in seconds of the
                                                        header
                                                        Consumes
                                                        $CODER_STRICT_TRANSPORT_SECURITY
                                                        (default 0)
      --strict-transport-security-options stringArray   Two optional fields can be set in the
                                                        Strict-Transport-Security header;
                                                        'includeSubDomains' and 'preload'. The
                                                        'strict-transport-security' flag must
                                                        be set to a non-zero value for these
                                                        options to be used
                                                        Consumes
                                                        $CODER_STRICT_TRANSPORT_SECURITY_OPTIONS
      --tls-address host:port                           HTTPS bind address of the server
                                                        Consumes $CODER_TLS_ADDRESS (default
                                                        127.0.0.1:3443)
      --tls-cert-file stringArray                       Path to each certificate for TLS. It
                                                        requires a PEM-encoded file. To
                                                        configure the listener to use a CA
                                                        certificate, concatenate the primary
                                                        certificate and the CA certificate
                                                        together. The primary certificate
                                                        should appear first in the combined
                                                        file
                                                        Consumes $CODER_TLS_CERT_FILE
      --tls-client-auth string                          Policy the server will follow for TLS
                                                        Client Authentication. Accepted values
                                                        are "none", "request", "require-any",
                                                        "verify-if-given", or
                                                        "require-and-verify"
                                                        Consumes $CODER_TLS_CLIENT_AUTH
                                                        (default "none")
      --tls-client-ca-file string                       PEM-encoded Certificate Authority file
                                                        used for checking the authenticity of
                                                        client
                                                        Consumes $CODER_TLS_CLIENT_CA_FILE
      --tls-client-cert-file string                     Path to certificate for client TLS
                                                        authentication. It requires a
                                                        PEM-encoded file
                                                        Consumes $CODER_TLS_CLIENT_CERT_FILE
      --tls-client-key-file string                      Path to key for client TLS
                                                        authentication. It requires a
                                                        PEM-encoded file
                                                        Consumes $CODER_TLS_CLIENT_KEY_FILE
      --tls-enable                                      Whether TLS will be enabled
                                                        Consumes $CODER_TLS_ENABLE
      --tls-key-file stringArray                        Paths to the private keys for each of
                                                        the certificates. It requires a
                                                        PEM-encoded file
                                                        Consumes $CODER_TLS_KEY_FILE
      --tls-min-version string                          Minimum supported version of TLS.
                                                        Accepted values are "tls10", "tls11",
                                                        "tls12" or "tls13"
                                                        Consumes $CODER_TLS_MIN_VERSION
                                                        (default "tls12")
OAuth2 / GitHub Flags: 
      --oauth2-github-allow-everyone               Allow all logins, setting this option means
                                                   allowed orgs and teams must be empty
                                                   Consumes
                                                   $CODER_OAUTH2_GITHUB_ALLOW_EVERYONE
      --oauth2-github-allow-signups                Whether new users can sign up with GitHub
                                                   Consumes $CODER_OAUTH2_GITHUB_ALLOW_SIGNUPS
      --oauth2-github-allowed-orgs stringArray     Organizations the user must be a member of
                                                   to Login with GitHub
                                                   Consumes $CODER_OAUTH2_GITHUB_ALLOWED_ORGS
      --oauth2-github-allowed-teams stringArray    Teams inside organizations the user must be
                                                   a member of to Login with GitHub.
                                                   Structured as:
                                                   <organization-name>/<team-slug>
                                                   Consumes $CODER_OAUTH2_GITHUB_ALLOWED_TEAMS
      --oauth2-github-client-id string             Client ID for Login with GitHub
                                                   Consumes $CODER_OAUTH2_GITHUB_CLIENT_ID
      --oauth2-github-client-secret string         Client secret for Login with GitHub
                                                   Consumes $CODER_OAUTH2_GITHUB_CLIENT_SECRET
      --oauth2-github-enterprise-base-url string   Base URL of a GitHub Enterprise deployment
                                                   to use for Login with GitHub
                                                   Consumes
                                                   $CODER_OAUTH2_GITHUB_ENTERPRISE_BASE_URL
OIDC Flags: 
      --oidc-allow-signups                             Whether new users can sign up with OIDC
                                                       Consumes $CODER_OIDC_ALLOW_SIGNUPS
                                                       (default true)
      --oidc-client-id string                          Client ID to use for Login with OIDC
                                                       Consumes $CODER_OIDC_CLIENT_ID
      --oidc-client-secret string                      Client secret to use for Login with
                                                       OIDC
                                                       Consumes $CODER_OIDC_CLIENT_SECRET
      --oidc-email-domain stringArray                  Email domains that clients logging in
                                                       with OIDC must match
                                                       Consumes $CODER_OIDC_EMAIL_DOMAIN
      --oidc-group-field string                        Change the OIDC default 'groups' claim
                                                       field. By default, will be 'groups' if
                                                       present in the oidc scopes argument
                                                       Consumes $CODER_OIDC_GROUP_FIELD
      --oidc-group-mapping struct[map[string]string]   A map of OIDC group IDs and the group
                                                       in Coder it should map to. This is
                                                       useful for when OIDC providers only
                                                       return group IDs
                                                       Consumes $OIDC_GROUP_MAPPING (default
                                                       {})
      --oidc-ignore-email-verified                     Ignore the email_verified claim from
                                                       the upstream provider
                                                       Consumes
                                                       $CODER_OIDC_IGNORE_EMAIL_VERIFIED
      --oidc-issuer-url string                         Issuer URL to use for Login with OIDC
                                                       Consumes $CODER_OIDC_ISSUER_URL
      --oidc-scopes stringArray                        Scopes to grant when authenticating
                                                       with OIDC
                                                       Consumes $CODER_OIDC_SCOPES (default
                                                       [openid,profile,email])
      --oidc-username-field string                     OIDC claim field to use as the username
                                                       Consumes $CODER_OIDC_USERNAME_FIELD
                                                       (default "preferred_username")
      --oidc-sign-in-text string                       The text to show on the OpenID Connect
                                                       sign in button
                                                       Consumes $CODER_OIDC_SIGN_IN_TEXT
                                                       (default "OpenID Connect")
      --oidc-icon-url url                              URL pointing to the icon to use on the
                                                       OepnID Connect login button
                                                       Consumes $CODER_OIDC_ICON_URL
Provisioning Flags: 
Tune the behavior of the provisioner, which is responsible for creating,
updating, and deleting workspace resources.

      --provisioner-force-cancel-interval duration   Time to force cancel provisioning tasks
                                                     that are stuck
                                                     Consumes
                                                     $CODER_PROVISIONER_FORCE_CANCEL_INTERVAL
                                                     (default 10m0s)
      --provisioner-daemon-poll-interval duration    Time to wait before polling for a new job
                                                     Consumes
                                                     $CODER_PROVISIONER_DAEMON_POLL_INTERVAL
                                                     (default 1s)
      --provisioner-daemon-poll-jitter duration      Random jitter added to the poll interval
                                                     Consumes
                                                     $CODER_PROVISIONER_DAEMON_POLL_JITTER
                                                     (default 100ms)
      --provisioner-daemons int                      Number of provisioner daemons to create
                                                     on start. If builds are stuck in queued
                                                     state for a long time, consider
                                                     increasing this
                                                     Consumes $CODER_PROVISIONER_DAEMONS
                                                     (default 3)
Telemetry Flags: 
Telemetry is critical to our ability to improve Coder. We strip all
personalinformation before sending data to our servers. Please only disable
telemetrywhen required by your organization's security policy.

      --telemetry         Whether telemetry is enabled or not. Coder collects anonymized usage
                          data to help improve our product
                          Consumes $CODER_TELEMETRY_ENABLE (default false)
      --telemetry-trace   Whether Opentelemetry traces are sent to Coder. Coder collects
                          anonymized application tracing to help improve our product.
                          Disabling telemetry also disables this option
                          Consumes $CODER_TELEMETRY_TRACE (default false)
⚠️ Dangerous Flags: 
      --dangerous-allow-path-app-sharing             Allow workspace apps that are not served
                                                     from subdomains to be shared. Path-based
                                                     app sharing is DISABLED by default for
                                                     security purposes. Path-based apps can
                                                     make requests to the Coder API and pose a
                                                     security risk when the workspace serves
                                                     malicious JavaScript. Path-based apps can
                                                     be disabled entirely with
                                                     --disable-path-apps for further security
                                                     Consumes
                                                     $CODER_DANGEROUS_ALLOW_PATH_APP_SHARING
      --dangerous-allow-path-app-site-owner-access   Allow site-owners to access workspace
                                                     apps from workspaces they do not own.
                                                     Owners cannot access path-based apps they
                                                     do not own by default. Path-based apps
                                                     can make requests to the Coder API and
                                                     pose a security risk when the workspace
                                                     serves malicious JavaScript. Path-based
                                                     apps can be disabled entirely with
                                                     --disable-path-apps for further security
                                                     Consumes
                                                     $CODER_DANGEROUS_ALLOW_PATH_APP_SITE_OWNER_ACCESS
Enterprise Flags: 
These options are only available in the Enterprise Edition.

      --audit-logging               Specifies whether audit logging is enabled
                                    Consumes $CODER_AUDIT_LOGGING (default true)
      --browser-only                Whether Coder only allows connections to workspaces via
                                    the browser
                                    Consumes $CODER_BROWSER_ONLY
      --derp-server-relay-url url   An HTTP URL that is accessible by other replicas to relay
                                    DERP traffic. Required for high availability
                                    Consumes $CODER_DERP_SERVER_RELAY_URL
      --scim-auth-header string     Enables SCIM and sets the authentication header for the
                                    built-in SCIM server. New users are automatically created
                                    with OIDC authentication
                                    Consumes $CODER_SCIM_AUTH_HEADER
